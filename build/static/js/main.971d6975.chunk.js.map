{"version":3,"sources":["components/Filter.js","components/PersonForm.js","hooks.js","components/Persons.js","components/Notification.js","App.js","services/persons.js","index.js"],"names":["FilterName","filter","handlerFilter","type","value","onChange","placeholder","PersonForm","addNewPerson","init","useState","name","newName","setNewName","number","newNumber","setNewNumber","isValid","test","this","usePerson","person","setPerson","reset","handlerChange","event","target","onSubmit","preventDefault","disabled","Persons","persons","remove","dataSelected","RegExp","exec","map","key","onClick","id","className","Notification","message","App","setPersons","setFilter","waitReset","notification","setTimeout","resetNotification","setNotification","errorNotification","successNotification","useNotification","useEffect","axios","get","then","response","data","catch","error","console","log","Filter","filterName","toLowerCase","includes","window","confirm","put","update","find","p","post","create","length","concat","JSON","stringify","delete","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"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","file":"static/js/main.971d6975.chunk.js","sourcesContent":["import React from \"react\";\r\n\r\nconst FilterName = ({ filter, handlerFilter }) => {\r\n  return (\r\n    <label>\r\n      filter shown with:\r\n      <input\r\n        type=\"text\"\r\n        value={filter}\r\n        onChange={handlerFilter}\r\n        placeholder=\"filter\"\r\n      />\r\n    </label>\r\n  );\r\n};\r\n\r\nexport default FilterName;\r\n","import React from \"react\";\r\n\r\nimport { usePerson } from \"../hooks\";\r\n\r\nconst PersonForm = ({ addNewPerson }) => {\r\n  const [person, setPerson, reset] = usePerson({ name: \"\", number: \"\" });\r\n  const handlerChange = (event) => {\r\n    const { name, value } = event.target;\r\n    const updateValue = name === \"name\" ? setPerson.name : setPerson.number;\r\n    updateValue(value);\r\n  };\r\n  return (\r\n    <form\r\n      onSubmit={(event) => {\r\n        event.preventDefault();\r\n        addNewPerson(person);\r\n        reset();\r\n      }}\r\n    >\r\n      <div>\r\n        name: <input name=\"name\" value={person.name} onChange={handlerChange} />\r\n      </div>\r\n      <div>\r\n        number: <input name=\"number\" value={person.number} onChange={handlerChange} />\r\n      </div>\r\n      <div>\r\n        <button type=\"submit\" disabled={ !person.isValid()}>add</button>\r\n      </div>\r\n    </form>\r\n  );\r\n};\r\n\r\nexport default PersonForm;\r\n","import { useState } from \"react\";\r\nconst usePerson = (init) => {\r\n  const [newName, setNewName] = useState(init.name);\r\n\r\n  const [newNumber, setNewNumber] = useState(init.number);\r\n\r\n  const person = { name: newName, number: newNumber , isValid(){return /\\w{4,}/.test(this.name) && /\\d+/.test(this.number)}}\r\n  const setPerson = { name: setNewName, number: setNewNumber };\r\n  const reset = () => {\r\n    setNewName(\"\");\r\n    setNewNumber(\"\");\r\n  };\r\n\r\n  return [person, setPerson, reset];\r\n};\r\n\r\nconst useNotification = () => {\r\n  \r\n  const waitReset = notification => {\r\n    return  (message)=> {\r\n      notification(message)\r\n      setTimeout(() => resetNotification() , 2000)\r\n    }\r\n  }\r\n  \r\n  const  [notification,setNotification] = useState({message:\"\",type:\"\"})\r\n  const resetNotification = waitReset( () =>  setNotification({message:\"\",type:\"\"}))\r\n  const errorNotification = waitReset(message  => setNotification({message, type:\"error\"}))\r\n  const successNotification = waitReset(message => setNotification({message ,type:\"success\"}))\r\n  return {notification, resetNotification ,errorNotification,successNotification}\r\n}\r\n\r\nexport { usePerson ,useNotification};\r\n","import React from \"react\";\r\n\r\nconst Persons = ({ persons, filter, remove }) => {\r\n  const dataSelected =\r\n    filter !== \"\"\r\n      ? persons.filter((person) => RegExp(filter, \"i\").exec(person.name))\r\n      : persons;\r\n\r\n  return (\r\n    <ul>\r\n      {dataSelected.map((person) => (\r\n        <li key={person.name}>\r\n          {`${person.name} ${person.number}`}\r\n          <button onClick={() => remove(person.id)} className=\"button-remove\">delete</button>\r\n        </li>\r\n      ))}\r\n    </ul>\r\n  );\r\n};\r\n\r\nexport default Persons;\r\n","import React from 'react'\r\n\r\nconst Notification = ({message,type}) => {\r\n    \r\n    if (message === \"\"  ){\r\n        return null\r\n    }\r\n    else {\r\n        return <div className={`notification ${type === \"success\" ? \"notification-success\" : \"notification-error\"}`} >{message}</div>\r\n    }\r\n}\r\n\r\n\r\nexport default Notification","import React, { useEffect, useState } from \"react\";\r\n\r\n//hooks\r\nimport {useNotification} from \"./hooks\"\r\n//components\r\nimport Filter from \"./components/Filter\";\r\nimport PersonForm from \"./components/PersonForm\";\r\nimport Persons from \"./components/Persons\";\r\nimport Notification from \"./components/Notification\";\r\n\r\n\r\nimport { getAll, create, remove, update } from \"./services/persons\";\r\n\r\nconst App = () => {\r\n  const [persons, setPersons] = useState([]);\r\n  const [filter, setFilter] = useState(\"\");\r\n  const {notification, errorNotification,successNotification} = useNotification();\r\n\r\n  useEffect(() => {\r\n    getAll().then((data) => setPersons(data));\r\n  }, []);\r\n\r\n  const handlerNewPerson = (person) => {\r\n    if (\r\n      persons\r\n        .map((person) => person.name.toLowerCase())\r\n        .includes(person.name.toLowerCase())\r\n    ) {\r\n      if (\r\n        window.confirm(\r\n          `${person.name} is already added to phonebook, replace the old number by the new one ?`\r\n        )\r\n      ) {\r\n        const id = persons.find((p) => p.name === person.name).id;\r\n        update(id, person).then((data) => {\r\n          successNotification(`update number of ${person.name}`)\r\n          setPersons(persons.map((p) => (p.id === data.id ? data : p)));\r\n        })\r\n        .catch(error => errorNotification(`can't update ${person.name}`))\r\n      }\r\n    } else {\r\n      person = { ...person, id: persons.length + 1 };\r\n\r\n      create(person)\r\n        .then((data) => {\r\n         successNotification(`append ${data.name} to phone book`)\r\n          setPersons(persons.concat(data));\r\n        })\r\n        .catch((error) => errorNotification(JSON.stringify(error )));\r\n    }\r\n  };\r\n\r\n  const handlerFilter = (event) => {\r\n    const filterName = event.target.value;\r\n    setFilter(filterName);\r\n  };\r\n\r\n  const handlerRemove = (id) => {\r\n    const person = persons.find((p) => p.id === id);\r\n\r\n    if (window.confirm(`delete ${person.name} ?`)) {\r\n      remove(id).then(() =>{\r\n        successNotification(`remove ${person.name} from phonebook`)\r\n        setPersons(persons.filter((person) => person.id !== id))}\r\n        \r\n      )\r\n      .catch(() => {\r\n        errorNotification(`information of ${person.name} has already been removed from server `)\r\n        setPersons(persons.filter(p=> p.id !== id))\r\n      })\r\n    }\r\n  };\r\n\r\n\r\n  return (\r\n    <div>\r\n      <h2>Phonebook</h2>\r\n      <Notification {...notification} />\r\n      <Filter filter={filter} handlerFilter={handlerFilter} />\r\n      <h3>add a new</h3>\r\n      <PersonForm addNewPerson={handlerNewPerson} />\r\n      <h3>Numbers</h3>\r\n      <Persons persons={persons} filter={filter} remove={handlerRemove} />\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default App;\r\n","import axios from \"axios\";\r\n/**\r\n * change localhost:3001/api/persons to a relative url\r\n * use a proxy for  developement mode \r\n */\r\nconst base_url = \"/api/persons\";\r\n\r\nconst getAll = () =>\r\n  axios\r\n    .get(base_url)\r\n    .then((response) => response.data)\r\n    .catch((error) => console.log(error));\r\n\r\nconst create = (person) =>{\r\n\r\n  return axios\r\n    .post(base_url, person)\r\n    .then((response) => {console.log(response)\r\n      return response.data})\r\n    .catch(error => console.log(error))\r\n  }\r\n\r\nconst remove = (id) =>\r\n  axios\r\n    .delete(`${base_url}/${id}`)\r\n    .then((response) => response.data)\r\n    \r\n\r\nconst update = (id, person) =>\r\n  axios\r\n    .put(`${base_url}/${id}`, person)\r\n    .then((response) => response.data)\r\n    .catch((error) => console.log(error));\r\n\r\n\r\nexport { getAll, create, remove , update};\r\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\n \n\n\n\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\n \n"],"sourceRoot":""}