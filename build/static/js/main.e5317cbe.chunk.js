(this.webpackJsonpphonebook=this.webpackJsonpphonebook||[]).push([[0],{15:function(e,n,t){e.exports=t(38)},20:function(e,n,t){},38:function(e,n,t){"use strict";t.r(n);var a=t(0),r=t.n(a),o=t(14),c=t.n(o),u=(t(20),t(4)),i=t(2),l=function(e){var n=e.filter,t=e.handlerFilter;return r.a.createElement("label",null,"filter shown with:",r.a.createElement("input",{type:"text",value:n,onChange:t,placeholder:"filter"}))},m=function(e){var n=e.addNewPerson,t=function(e){var n=Object(a.useState)(e.name),t=Object(i.a)(n,2),r=t[0],o=t[1],c=Object(a.useState)(e.number),u=Object(i.a)(c,2),l=u[0],m=u[1];return[{name:r,number:l,isValid:function(){return/\w{4,}/.test(this.name)&&/\d+/.test(this.number)}},{name:o,number:m},function(){o(""),m("")}]}({name:"",number:""}),o=Object(i.a)(t,3),c=o[0],u=o[1],l=o[2],m=function(e){var n=e.target,t=n.name,a=n.value;("name"===t?u.name:u.number)(a)};return r.a.createElement("form",{onSubmit:function(e){e.preventDefault(),n(c),l()}},r.a.createElement("div",null,"name: ",r.a.createElement("input",{name:"name",value:c.name,onChange:m})),r.a.createElement("div",null,"number: ",r.a.createElement("input",{name:"number",value:c.number,onChange:m})),r.a.createElement("div",null,r.a.createElement("button",{type:"submit",disabled:!c.isValid()},"add")))},f=function(e){var n=e.persons,t=e.filter,a=e.remove;console.log(n);var o=""!==t?n.filter((function(e){return RegExp(t,"i").exec(e.name)})):n;return r.a.createElement("ul",null,o.map((function(e){return r.a.createElement("li",{key:e.name},"".concat(e.name," ").concat(e.number),r.a.createElement("button",{onClick:function(){return a(e.id)},className:"button-remove"},"delete"))})))},s=function(e){var n=e.message,t=e.type;return""===n?null:r.a.createElement("div",{className:"notification ".concat("success"===t?"notification-success":"notification-error")},n)},d=t(3),b=t.n(d),p=function(){var e=Object(a.useState)([]),n=Object(i.a)(e,2),t=n[0],o=n[1],c=Object(a.useState)(""),d=Object(i.a)(c,2),p=d[0],h=d[1],v=function(){var e=function(e){return function(n){e(n),setTimeout((function(){return c()}),2e3)}},n=Object(a.useState)({message:"",type:""}),t=Object(i.a)(n,2),r=t[0],o=t[1],c=e((function(){return o({message:"",type:""})})),u=e((function(e){return o({message:e,type:"error"})})),l=e((function(e){return o({message:e,type:"success"})}));return{notification:r,resetNotification:c,errorNotification:u,successNotification:l}}(),E=v.notification,g=v.errorNotification,w=v.successNotification;Object(a.useEffect)((function(){b.a.get("/api/persons").then((function(e){return e.data})).catch((function(e){return console.log(e)})).then((function(e){return o(e)}))}),[]);return r.a.createElement("div",null,r.a.createElement("h2",null,"Phonebook"),r.a.createElement(s,E),r.a.createElement(l,{filter:p,handlerFilter:function(e){var n=e.target.value;h(n)}}),r.a.createElement("h3",null,"add a new"),r.a.createElement(m,{addNewPerson:function(e){t.map((function(e){return e.name.toLowerCase()})).includes(e.name.toLowerCase())?window.confirm("".concat(e.name," is already added to phonebook, replace the old number by the new one ?"))&&function(e,n){return b.a.put("".concat("/api/persons","/").concat(e),n).then((function(e){return e.data})).catch((function(e){return console.log(e)}))}(t.find((function(n){return n.name===e.name})).id,e).then((function(n){o(t.map((function(e){return e.id===n.id?n:e}))),w("update number of ".concat(e.name))})).catch((function(n){return g("can't update ".concat(e.name))})):function(e){return b.a.post("/api/persons",e).then((function(e){return e.data})).catch((function(e){return console.log(e)}))}(e=Object(u.a)(Object(u.a)({},e),{},{id:t.length+1})).then((function(e){o(t.concat(e)),w("append ".concat(e.name," to phone book"))})).catch((function(e){return g(e)}))}}),r.a.createElement("h3",null,"Numbers"),r.a.createElement(f,{persons:t,filter:p,remove:function(e){var n=t.find((function(n){return n.id===e}));window.confirm("delete ".concat(n.name," ?"))&&function(e){return b.a.delete("".concat("/api/persons","/").concat(e)).then((function(e){return e.data}))}(e).then((function(){o(t.filter((function(n){return n.id!==e}))),w("remove ".concat(n.name," from phonebook"))})).catch((function(){g("information of ".concat(n.name," has already been removed from server ")),o(t.filter((function(n){return n.id!==e})))}))}}))};c.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(p,null)),document.getElementById("root"))}},[[15,1,2]]]);
//# sourceMappingURL=main.e5317cbe.chunk.js.map