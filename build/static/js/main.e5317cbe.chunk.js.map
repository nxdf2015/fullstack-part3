{"version":3,"sources":["components/Filter.js","components/PersonForm.js","hooks.js","components/Persons.js","components/Notification.js","App.js","services/persons.js","index.js"],"names":["FilterName","filter","handlerFilter","type","value","onChange","placeholder","PersonForm","addNewPerson","init","useState","name","newName","setNewName","number","newNumber","setNewNumber","isValid","test","this","usePerson","person","setPerson","reset","handlerChange","event","target","onSubmit","preventDefault","disabled","Persons","persons","remove","console","log","dataSelected","RegExp","exec","map","key","onClick","id","className","Notification","message","App","setPersons","setFilter","waitReset","notification","setTimeout","resetNotification","setNotification","errorNotification","successNotification","useNotification","useEffect","axios","get","then","response","data","catch","error","Filter","filterName","toLowerCase","includes","window","confirm","put","update","find","p","post","create","length","concat","delete","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"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","file":"static/js/main.e5317cbe.chunk.js","sourcesContent":["import React from \"react\";\r\n\r\nconst FilterName = ({ filter, handlerFilter }) => {\r\n  return (\r\n    <label>\r\n      filter shown with:\r\n      <input\r\n        type=\"text\"\r\n        value={filter}\r\n        onChange={handlerFilter}\r\n        placeholder=\"filter\"\r\n      />\r\n    </label>\r\n  );\r\n};\r\n\r\nexport default FilterName;\r\n","import React from \"react\";\r\n\r\nimport { usePerson } from \"../hooks\";\r\n\r\nconst PersonForm = ({ addNewPerson }) => {\r\n  const [person, setPerson, reset] = usePerson({ name: \"\", number: \"\" });\r\n  const handlerChange = (event) => {\r\n    const { name, value } = event.target;\r\n    const updateValue = name === \"name\" ? setPerson.name : setPerson.number;\r\n    updateValue(value);\r\n  };\r\n  return (\r\n    <form\r\n      onSubmit={(event) => {\r\n        event.preventDefault();\r\n        addNewPerson(person);\r\n        reset();\r\n      }}\r\n    >\r\n      <div>\r\n        name: <input name=\"name\" value={person.name} onChange={handlerChange} />\r\n      </div>\r\n      <div>\r\n        number: <input name=\"number\" value={person.number} onChange={handlerChange} />\r\n      </div>\r\n      <div>\r\n        <button type=\"submit\" disabled={ !person.isValid()}>add</button>\r\n      </div>\r\n    </form>\r\n  );\r\n};\r\n\r\nexport default PersonForm;\r\n","import { useState } from \"react\";\r\nconst usePerson = (init) => {\r\n  const [newName, setNewName] = useState(init.name);\r\n\r\n  const [newNumber, setNewNumber] = useState(init.number);\r\n\r\n  const person = { name: newName, number: newNumber , isValid(){return /\\w{4,}/.test(this.name) && /\\d+/.test(this.number)}}\r\n  const setPerson = { name: setNewName, number: setNewNumber };\r\n  const reset = () => {\r\n    setNewName(\"\");\r\n    setNewNumber(\"\");\r\n  };\r\n\r\n  return [person, setPerson, reset];\r\n};\r\n\r\nconst useNotification = () => {\r\n  \r\n  const waitReset = notification => {\r\n    return  (message)=> {\r\n      notification(message)\r\n      setTimeout(() => resetNotification() , 2000)\r\n    }\r\n  }\r\n  \r\n  const  [notification,setNotification] = useState({message:\"\",type:\"\"})\r\n  const resetNotification = waitReset( () =>  setNotification({message:\"\",type:\"\"}))\r\n  const errorNotification = waitReset(message  => setNotification({message, type:\"error\"}))\r\n  const successNotification = waitReset(message => setNotification({message ,type:\"success\"}))\r\n  return {notification, resetNotification ,errorNotification,successNotification}\r\n}\r\n\r\nexport { usePerson ,useNotification};\r\n","import React from \"react\";\r\n\r\nconst Persons = ({ persons, filter, remove }) => {\r\n  console.log(persons)\r\n  const dataSelected =\r\n    filter !== \"\"\r\n      ? persons.filter((person) => RegExp(filter, \"i\").exec(person.name))\r\n      : persons;\r\n\r\n  return (\r\n    <ul>\r\n      {dataSelected.map((person) => (\r\n        <li key={person.name}>\r\n          {`${person.name} ${person.number}`}\r\n          <button onClick={() => remove(person.id)} className=\"button-remove\">delete</button>\r\n        </li>\r\n      ))}\r\n    </ul>\r\n  );\r\n};\r\n\r\nexport default Persons;\r\n","import React from 'react'\r\n\r\nconst Notification = ({message,type}) => {\r\n    \r\n    if (message === \"\"  ){\r\n        return null\r\n    }\r\n    else {\r\n        return <div className={`notification ${type === \"success\" ? \"notification-success\" : \"notification-error\"}`} >{message}</div>\r\n    }\r\n}\r\n\r\n\r\nexport default Notification","import React, { useEffect, useState } from \"react\";\r\n\r\n//hooks\r\nimport { useNotification } from \"./hooks\";\r\n//components\r\nimport Filter from \"./components/Filter\";\r\nimport PersonForm from \"./components/PersonForm\";\r\nimport Persons from \"./components/Persons\";\r\nimport Notification from \"./components/Notification\";\r\n\r\nimport { getAll, create, remove, update } from \"./services/persons\";\r\n\r\nconst App = () => {\r\n  const [persons, setPersons] = useState([]);\r\n  const [filter, setFilter] = useState(\"\");\r\n  const {\r\n    notification,\r\n    errorNotification,\r\n    successNotification,\r\n  } = useNotification();\r\n\r\n  useEffect(() => {\r\n    getAll().then((data) => setPersons(data));\r\n  }, []);\r\n\r\n  const handlerNewPerson = (person) => {\r\n    if (\r\n      persons\r\n        .map((person) => person.name.toLowerCase())\r\n        .includes(person.name.toLowerCase())\r\n    ) {\r\n      if (\r\n        window.confirm(\r\n          `${person.name} is already added to phonebook, replace the old number by the new one ?`\r\n        )\r\n      ) {\r\n        const id = persons.find((p) => p.name === person.name).id;\r\n        update(id, person)\r\n          .then((data) => {\r\n            setPersons(persons.map((p) => (p.id === data.id ? data : p)));\r\n            successNotification(`update number of ${person.name}`);\r\n          })\r\n          .catch((error) => errorNotification(`can't update ${person.name}`));\r\n      }\r\n    } else {\r\n      person = { ...person, id: persons.length + 1 };\r\n\r\n      create(person)\r\n        .then((data) => {\r\n          setPersons(persons.concat(data));\r\n          successNotification(`append ${data.name} to phone book`);\r\n        })\r\n        .catch((error) => errorNotification(error));\r\n    }\r\n  };\r\n\r\n  const handlerFilter = (event) => {\r\n    const filterName = event.target.value;\r\n    setFilter(filterName);\r\n  };\r\n\r\n  const handlerRemove = (id) => {\r\n    const person = persons.find((p) => p.id === id);\r\n\r\n    if (window.confirm(`delete ${person.name} ?`)) {\r\n      remove(id)\r\n        .then(() => {\r\n          setPersons(persons.filter((person) => person.id !== id));\r\n          successNotification(`remove ${person.name} from phonebook`);\r\n        })\r\n        .catch(() => {\r\n          errorNotification(\r\n            `information of ${person.name} has already been removed from server `\r\n          );\r\n          setPersons(persons.filter((p) => p.id !== id));\r\n        });\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div>\r\n      <h2>Phonebook</h2>\r\n      <Notification {...notification} />\r\n      <Filter filter={filter} handlerFilter={handlerFilter} />\r\n      <h3>add a new</h3>\r\n      <PersonForm addNewPerson={handlerNewPerson} />\r\n      <h3>Numbers</h3>\r\n      <Persons persons={persons} filter={filter} remove={handlerRemove} />\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default App;\r\n","import axios from \"axios\";\r\n/**\r\n * change localhost:3001/api/persons to a relative url\r\n * use a proxy for  developement mode \r\n */\r\nconst base_url = \"/api/persons\";\r\n\r\nconst getAll = () =>\r\n  axios\r\n    .get(base_url)\r\n    .then((response) => response.data)\r\n    .catch((error) => console.log(error));\r\n\r\nconst create = (person) =>{\r\n\r\n  return axios\r\n    .post(base_url, person)\r\n    .then((response) => response.data)\r\n    .catch(error => console.log(error))\r\n  }\r\n\r\nconst remove = (id) =>\r\n  axios\r\n    .delete(`${base_url}/${id}`)\r\n    .then((response) => response.data)\r\n    \r\n\r\nconst update = (id, person) =>\r\n  axios\r\n    .put(`${base_url}/${id}`, person)\r\n    .then((response) => response.data)\r\n    .catch((error) => console.log(error));\r\n\r\n\r\nexport { getAll, create, remove , update};\r\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\n \n\n\n\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\n \n"],"sourceRoot":""}